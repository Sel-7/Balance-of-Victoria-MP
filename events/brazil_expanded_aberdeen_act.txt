namespace = alberdeen_act

#England slave pressure
alberdeen_act.1 = {
	type = country_event
	placement = ROOT

	title = alberdeen_act.1.t
	desc = alberdeen_act.1.d
	flavor = alberdeen_act.1.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_slave_chains.bk2"
		}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/slaves_breaking_their_chains"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
			exists = c:BRZ
			c:BRZ = ROOT
			is_player = yes
			has_global_variable = alberdeen_act_enacted
			NOT = { has_variable = alberdeen_act_once}
		}
	immediate = {

		set_variable = {
			name = alberdeen_act_malus #var for the convoy raiding modifier and cash grab
			integer = yes
			value = 0.5
		}
		set_variable = {
			name = alberdeen_act_once
			value = yes
		}
	}

	option = {		#UK PRESSURES BRAZIL
		name = alberdeen_act.1.a
		default_option = yes

		add_journal_entry = { # ENGLISH PRESSURE JOURNAL
		type = je_slavery_debate.1
		}

		add_journal_entry = { # EUSÉBIO JOURNAL
		type = je_slavery_debate.2
		}

		c:BRZ = { 
			add_modifier = {
				name = br_last_slave_country
				}
			}
		
			add_radicals = {
				value = 0.05
				pop_type = slaves
				}
			
			change_relations = {
				country = c:GBR
				value = -20
			}

			ig:ig_intelligentsia ={
				add_modifier = {
					name = ig_group_angry
					months = 25
				}
			}
		
	}

	
}

alberdeen_act.2 = { #event that gives bonus and malus for the tick of the english pressure + SLAVERY MONEY AND -CONVOYS (ENGLISH RAIDS) - keeps repeting itself
	type = country_event
	placement = ROOT

	title = alberdeen_act.2.t
	desc = alberdeen_act.2.d
	flavor = alberdeen_act.2.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_naval_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/naval_battle"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	trigger = {
			exists = c:BRZ
			c:BRZ = ROOT
			is_player = yes
			NOT = {has_global_variable = name = eusebio_enacted}
	
		}
	immediate = {
		random_scope_state = {
			save_scope_as = slave_insurrection_state
			}
		random_interest_group = { #cheking for angry IG till next election
			limit = {
				OR = {
					is_interest_group_type = ig_rural_folk
					is_interest_group_type = ig_trade_unions
					is_interest_group_type = ig_intelligentsia
					is_interest_group_type = ig_industrialists
					}
				leader = {
					NOT = { has_ideology = ideology_anti_slavery }
						}
					}
			save_scope_as = ig_abolist
		
				}
	}

	option = {		#WE DO NOT CARE FOR THE PRESSURE - WHY ARE WE GETTING A FREE TICK????
		name = alberdeen_act.2.a
		custom_tooltip = alberdeen_act.2.a.tt
		add_journal_entry = {
			type = je_slavery_debate.1 #restarts english pressure journal
			
			}
		
		add_modifier = {
			name = br_slavery_mod  #GOOD BONUS FOR NOT CARING
			multiplier = var:alberdeen_act_malus
			months = 25
				}
		
		add_modifier = {
			name = br_english_raiding # REMOVE IN EUSEBIO LAW
			months = 25
			multiplier = var:alberdeen_act_malus
				}
		
		change_variable = { #LOSES 1 EUSÉBIO TICK
			name = slavery_ban_var
			add = -1
				}
					
		scope:slave_insurrection_state = {
			add_radicals = {
				value = 0.05
				pop_type = slaves
				}
			}
			change_relations = {
				country = c:GBR
				value = -20
			}
			ig:ig_landowners = {
				add_modifier = {
					name = home_investment
					months = 25
						}
					}

	}
	
	option = {	

		default_option = yes
	
				#CONCESSIONS TO UK
			name = alberdeen_act.2.b
			custom_tooltip = alberdeen_act.2.b.tt
			add_journal_entry = {
				type = je_slavery_debate.1 #restarts english pressure
				
				}
			remove_modifier = br_slavery_mod
			change_variable = { #GAIN 1 EUSÉBIO TICK
			name = slavery_ban_var
			add = 1
					}
			scope:slave_insurrection_state = {
				add_loyalists = {
					value = 0.05
					pop_type = slaves
					}
				}
			change_relations = { #GOOD RELATION
				country = c:GBR
				value = 20
				}
			
			scope:ig_abolist = {
				add_modifier = {
					name = home_investment
					months = 25
				}
			}

			ig:ig_landowners = {
				add_modifier = {
					name = ig_group_angry
					months = 25
						}
					}
		}
	
}



alberdeen_act.3 = { # SHIPMENT INTERCEPTED - DONE EVENT
	type = country_event
	placement = scope:free_state_of_county
	title = alberdeen_act.3.t
	desc = alberdeen_act.3.d
	flavor = alberdeen_act.3.f

	event_image = {
		video = "gfx/event_pictures/southamerica_slave_chains.bk2"
		}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/slaves_breaking_their_chains"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3

	trigger = {
		exists = c:BRZ
		c:BRZ = ROOT
	}

	immediate = {
		random_scope_state = {
			save_scope_as = free_state_of_county
		}

	}

	option = {
		name = alberdeen_act.3.a #compensate slaveowners
		custom_tooltip = alberdeen_act.3.a.tt
		default_option = yes

		change_variable = { #LOSES 1 EUSÉBIO TICK
			name = slavery_ban_var
			add = -1
		}
		ig:ig_landowners = {
			add_modifier = {
				name = br_landowners_happy
				months = 25
						}
					}
		scope:free_state_of_county = {
			add_loyalists = {
				pop_type = aristocrats
				value = 0.25
			}
		}
					
			scope:free_state_of_county = {
				add_modifier = {
					name = br_lack_of_slaves
					months = 25	
				}
			}
		
	}

	option = {
		name = alberdeen_act.3.b # get Eusebio Law approval modifier almost no good from this

		add_radicals = {
			value = 0.1
		}

		change_relations = {
			country = c:GBR
			value = -20
		}
		custom_tooltip = alberdeen_act.3.b.tt
		
		change_variable = { #GET 1 EUSÉBIO TICK
				name = slavery_ban_var
				add = 1
			}
		
	}
}


	
alberdeen_act.4 = { #RAIDING IN OUR COAST - DONE
	type = country_event

	title = alberdeen_act.4.t
	desc = alberdeen_act.4.d
	flavor = alberdeen_act.4.f
	placement = scope:port_attacked

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_naval_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/naval_battle"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"


	trigger = {
		exists = c:BRZ
		c:BRZ = ROOT
		

	}

	immediate = {
		random_scope_state = {
			limit = {
				is_coastal = yes
				}
			save_scope_as = port_attacked
		}


	}


	option = { #support our Navy and prestige
		name = alberdeen_act.4.a
		custom_tooltip = alberdeen_act.4.a.tt
		default_option = yes

		scope:port_attacked = {
			create_building={
				building="building_naval_base"
				level=5
				reserves=1
					}
				}
		scope:port_attacked.state_region = {
			add_devastation = 10
		}
		add_modifier = {
			name = armoured_high_seas_fleet
			months = 25
		}
		ig:ig_armed_forces = {
			add_modifier = {
				name = home_investment
				months = 13
				}
			}
			change_variable = { #LOSE 1 EUSÉBIO TICK
			name = slavery_ban_var
			add = -1
				}

		}

	option = { #landowner hunhhapy removed from office, abolitionist happies
		name = alberdeen_act.4.b
		custom_tooltip = alberdeen_act.4.b.tt
		scope:port_attacked = {
			create_pop = {
				pop_type = labours
				culture = brazilian
				size = 5000			
			}
				
			add_radicals = {
				pop_type = officers
				value = 0.15
			}
			scope:port_attacked.state_region = {
				add_devastation = 10
			}
			
		}
		change_variable = { #GET 1 EUSÉBIO TICK
		name = slavery_ban_var
		add = 1
			}
		
	}
}


alberdeen_act.5 = { #ABOLITIONISTS GOES TO A STATE AND BE FREE SLAVE OR NOT = OK DONE
	type = country_event

	title = alberdeen_act.5.t
	desc = alberdeen_act.5.d
	flavor = alberdeen_act.5.f
	placement = scope:br_free_slave

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/slaves_night"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	duration = 3

	trigger = {
		exists = c:BRZ
		c:BRZ = ROOT
		
		#NOT = { has_variable = br_free_slave_happened } REPEAT OR NOT???
		

	}

	immediate = {
		set_variable = {
			name = br_free_slave_happened
			value = yes
		}
		random_scope_state = {
			save_scope_as = br_free_slave
		}
	}

	cancellation_trigger = {
		
	}

	option = {
		name = alberdeen_act.5.a
		
		default_option = yes
		change_variable = { #GAIN 1 EUSÉBIO TICK
			name = slavery_ban_var
			add = 1
				}
		scope:br_free_slave = {
				add_modifier = {
				name = br_free_state
				months = 25
					}
				}
		ig:ig_landowners = {
			add_modifier = {
				name = br_landowners_angry
				months = 25
						}
					}
		hidden_effect = {				
			scope:br_free_slave = {
				create_pop = {
					pop_type = labours
					culture = brazilian
					size = 3000			
				}
			}
		}
			custom_tooltip = alberdeen_act.5_tt
			custom_tooltip = alberdeen_act.5_att2
	}
	option = {
		name = alberdeen_act.5.b
		change_variable = { #GAIN 1 EUSÉBIO TICK
		name = slavery_ban_var
		add = -1
			}
		ig:ig_landowners = {
			add_modifier = {
				name = br_landowners_happy
				months = 25
						}
					}
		scope:br_free_slave = {
			add_loyalists = {
				pop_type = aristocrats
				value = 0.25
				}

		}
		scope:br_free_slave.state_region = {
			add_devastation = 10
			}
		hidden_effect = {				
			scope:br_free_slave = {
				create_pop = {
					pop_type = slaves
					culture = afro_brazilian
					size = 2000			
					}
				}
			}
		custom_tooltip = alberdeen_act.5_tt2
		custom_tooltip = alberdeen_act.5_btt2
		
	}
}



alberdeen_act.6 = { #SLAVE PUNISHED OR NOT - OK DONE
	type = country_event

	event_image = {
		video = "gfx/event_pictures/southamerica_slaves_night.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/slaves_night"

	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	title = alberdeen_act.6.t
	desc = alberdeen_act.6.d
	flavor = alberdeen_act.6.f

	duration = 3

	trigger = {
		
		NOT = { has_law = law_type:law_slavery_banned }
		any_interest_group = {
			is_revolutionary = no
			is_insurrectionary = no
			is_marginal = no
			OR = {
				has_ideology = ideology_pro_slavery
				leader = {
					has_ideology = ideology_slaver
				}
			}
		}
		
	}

	immediate = {
		random_interest_group = {
			limit = {
				is_revolutionary = no
				is_insurrectionary = no
				is_marginal = no
				OR = {
					has_ideology = ideology_pro_slavery
					leader = {
						has_ideology = ideology_slaver
					}
				}
			}
			save_scope_as = slaver_ig
			leader = {
				save_scope_as = slaver_ig_leader
			}
		}

	}


	option = {
		name = alberdeen_act.6.a
        default_option = yes
		change_variable = { #LOSES 1 EUSÉBIO TICK
		name = slavery_ban_var
		add = -1
				}
		custom_tooltip = alberdeen_act.6.att
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology_pro_slavery
					leader = { has_ideology = ideology_slaver }
				}
			}
			add_modifier = {
				name = ig_slavers_happy
				months = short_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology_anti_slavery
					leader = { has_ideology = ideology_abolitionist }
				}
			}
			add_modifier = {
				name = ig_abolitionists_mad
				months = short_modifier_time
			}
		}
	}
	option = {
		name = alberdeen_act.6.b
		custom_tooltip = alberdeen_act.6.btt
		change_variable = { #GAIN 1 EUSÉBIO TICK
		name = slavery_ban_var
		add = 1
				}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology_pro_slavery
					leader = { has_ideology = ideology_slaver }
				}
				NOT = { has_modifier = ig_slavers_mad }
			}
			add_modifier = {
				name = ig_slavers_mad
				months = short_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology_anti_slavery
					leader = { has_ideology = ideology_abolitionist }
				}
				NOT = { has_modifier = ig_abolitionists_happy }
			}
			add_modifier = {
				name = ig_abolitionists_happy
				months = short_modifier_time
			}
		}
	}
}