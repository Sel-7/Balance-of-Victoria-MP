namespace = paraguay_war


paraguay_war.1 = { #PRE CRISIS FALOUR EVENT - EQUALIZES MILITARY TECH BR X PAR
	type = country_event
	placement = s:STATE_URUGUAY.region_state:URU


	title = paraguay_war.1.t
	desc = paraguay_war.1.d
	flavor = paraguay_war.1.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_political_extremism.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/political_extremism"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
		is_at_war = no
		game_date >= 1860.1.1
		NOT = {has_variable = par_war_event} 
		
	}

	immediate = { #IMMEDIATE LEVEL THE TECH FIELDS PRG X BRZ and ups the barracks in PRG to lvl 34, modifier to cover expanses
	

		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}

		set_variable = {
			name = par_war_event
		}

		s:STATE_BAJO_PARAGUAY.region_state:PRG = {
			create_building={
				building="building_barracks"
				level=34
				reserves=1
				activate_production_methods={ "pm_wound_dressing" "pm_line_infantry" "pm_cavalry_scouts" "pm_no_specialists" "pm_cannon_artillery" }
				}
			}
		c:PRG = {
			add_modifier = {
				name = prg_support_mod
				months = 13
				}
			}

		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = shell_gun 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 11400 technology = shell_gun }
				}
			}
		

		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = percussion_cap 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 11400 technology = percussion_cap }
				}
			}				
				
		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = rifling 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 11400 technology = rifling }
				}
			}	

		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = breech_loading_artillery 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 45000 technology = breech_loading_artillery }
				}
			}
		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = repeaters 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 45000 technology = repeaters }
				}
			}
		if = {
			limit = {
				c:BRZ = {
					has_technology_researched = general_staff 
					}
				}
			c:PRG = {
				add_technology_progress = { progress = 11400 technology = general_staff }
				}
			}
	
		}

	option = {
		default_option = yes

		name = paraguay_war.1.a #sets up crysis journal, tick for war
		add_journal_entry = {
			type = je_la_plata_crysis.1
			#target = scope:coronel_leading_ig_1 maybe set up a target?
			}
		}
		 
}

paraguay_war.2 = { #DEVASTATION TO RS, CONTINUE TO ESCALATE OR BACK DOWN
	type = country_event
	placement = s:STATE_URUGUAY.region_state:URU

	title = paraguay_war.2.t
	desc = paraguay_war.2.d
	flavor = paraguay_war.2.f

	event_image = {
		video = "gfx/event_pictures/southamerica_war_civilians.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/asia/dead_cattle_poor_harvest"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
		
	}

	immediate = {
		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}
		
	}

	option = { #devastation to RS - 
		default_option = yes
		s:STATE_RIO_GRANDE_DO_SUL = {
			add_devastation = 30
			}
		name = paraguay_war.2.a #sets up another crysis journal, tick for war
		c:BRZ = {
			add_modifier = uru_support_mod
		}
		hidden_effect = {
		add_journal_entry = {
			type = je_la_plata_crysis.2

				}
			}
		c:ARG = {
			change_relations = {
				country = c:PRG
				value = -20
			}
		}
		}
	option = { #bad decision, PRG gets URU
		name = paraguay_war.2.b
		s:STATE_RIO_GRANDE_DO_SUL = {
			add_devastation = 30
			}
		trigger_event = {
			id = par_war_alternative.1
			days = 30
			popup = yes
		}

	}
			 
}

paraguay_war.3 = { #BR COMPENSATION ASKED , WE CAN LAYDOWN AND END CRYSIS - PARAGUAY MAKES URU PUPPET
	type = country_event
	placement = s:STATE_URUGUAY.region_state:URU

	title = paraguay_war.3.t
	desc = paraguay_war.3.d
	flavor = paraguay_war.3.f

	event_image = {
		video = "gfx/event_pictures/unspecific_signed_contract.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/signed_contract"



	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
		
	}

	immediate = {
		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}
		
	}

	option = { #
		default_option = yes
		name = paraguay_war.3.a #sets up another crysis journal, tick for war
		add_journal_entry = {
			type = je_la_plata_crysis.3

			}
		}

		#IF WE CHOOSE THIS PARAGUAY PUPPET URUGUAY
		option = { 
		
		name = paraguay_war.3.b 
		trigger_event = {
			id = par_war_alternative.1
			days = 30
			popup = yes
			}
		c:BRZ = {
			remove_modifier = uru_support_mod
			}
		}	 
}


paraguay_war.4 = { #POLITICAL COMPENSATION ASKED AND DENIED, SENDO ULTIMATE TO URU OR ALLY PAR?
	type = country_event
	placement = s:STATE_URUGUAY.region_state:URU

	title = paraguay_war.4.t
	desc = paraguay_war.4.d
	flavor = paraguay_war.4.f 

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}


	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/factory_opening"



	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
		
	}

	immediate = {
		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}
		
	}

	option = { #
		default_option = yes

		name = paraguay_war.4.a # sends ultatium to Uru
		#custom_tooltip = paraguay_war.4.att
		hidden_effect = {
		trigger_event = {
			id = paraguay_war.5
			days = 30
			popup = yes
				}
			}
		}

		option = { 
		
		name = paraguay_war.4.b #SETS UP TALKS WITH PARAGUAY - MAY LEAD TO COALITION X ARGENTINA AND uru puppet
		hidden_effect = {
		trigger_event = {
			id = par_war_alternative.2
			days = 7
			popup = yes
			}
		}
			c:BRZ = {
				remove_modifier = uru_support_mod
				}
		}
 
}

paraguay_war.5 = { #PARAGUAY ANSWERS TO THE ULTIMATUM and war with Uruguay starts or back down, bad choice
	type = country_event
	placement = s:STATE_URUGUAY.region_state:URU

	title = paraguay_war.5.t
	desc = paraguay_war.5.d
	flavor = paraguay_war.5.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_before_the_battle.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/before_the_battle"
	
	icon = "gfx/interface/icons/event_icons/event_military.dds"


	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
		
	}

	immediate = {
		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}
		}
	

	option = { 
		default_option = yes
		
		name = paraguay_war.5.a #STARTS WAR WITH URUGUAY - NEED TO TIE WHY WAR? REGIME CHANGE? WHY?
		c:BRZ = {
			create_diplomatic_play = {
				name = uruguay_war
			
				target_state = s:STATE_URUGUAY.region_state:URU
				
				war = yes

				type = dp_regime_change
	
				add_war_goal = {
					holder = c:URU
					type = war_reparations
					target_country = c:BRZ
					}
				}	
			}
		c:BRZ = {
			add_modifier = {
				name = br_conscription_bad #bit of debuff to brz
				months = 13
				}
			}
		c:BRZ = {
				remove_modifier = uru_support_mod
				}
		
		hidden_effect = {
		trigger_event = {
			id = paraguay_war.6
			days = 70
			popup = yes
				}
			}
		}

		option = { 
		name = paraguay_war.5.b #ends crisis and paraguay protectorate uru, invades arg
		
		trigger_event = {
			id = par_war_alternative.1
			days = 60 #change this to 60 days
			popup = yes
			}
			c:BRZ = {
				remove_modifier = uru_support_mod
				}
		}
 
}


paraguay_war.6 = { #PARAGUAY DECLARES WAR
	type = country_event
	placement = ROOT

	title = paraguay_war.6.t
	desc = paraguay_war.6.d
	flavor = paraguay_war.6.f

	event_image = {
	 	texture = "gfx/event_pictures/paraguay_declares_war.dds"
	}

	#no sound is welcome here because of dow
	#on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/southamerica/factory_opening"



	icon = "gfx/interface/icons/event_icons/event_military.dds"

	duration = 3

	trigger = {
		c:BRZ = ROOT
		is_player = yes
	}
	#HERE WE KILL THEIR GENERAL AND MAKE 2 NEW ONES BECAUSE THE AI IS A GENIOUS AND CAN´T FIGHT MULTIFRONT WAR
	immediate = { 

		c:PRG = {
			random_scope_general = {
				is_general = yes
				kill_character = yes
			}
		}
	
		c:PRG = { 
			create_character = {
				first_name = Francisco
				last_name = Resquin
				is_general = yes
				interest_group = ig_armed_forces
				female = no
				birth_date = 1824.1.2
				#dna = random_dna
				ideology = ideology_republican_leader
				traits = {
					pillager
					stalwart_defender
					forest_commander
					}
				}
			}
	
		c:PRG = { 
		create_character = {
			first_name = Bernardino
			last_name = Caballero
			is_general = yes
			interest_group = ig_armed_forces
			female = no
			birth_date = 1839.5.10
			#dna = random_dna
			ideology = ideology_republican_leader
			traits = {
				resupply_commander
				surveyor
				expert_artillery_commander
				}
			}
		}

		c:URU = {
			save_scope_as = uru_scope
			}
		c:ARG = {
			save_scope_as = arg_scope
			}
		c:PRG = {
			save_scope_as = prg_scope
			}
		set_variable = {
			name = cisplatina_war #this goes for the cisplatina claim event later
		}
		c:PRG = {
			add_modifier = {
				name = br_par_army_def #sets up +15% defense for Paraguay for 1 year, needs balance
				months = 13
			}
		}

		c:PRG = { #Removes the possible debuff from equipment change in Paraguay
			every_scope_building = {
				remove_modifier = pm_offense_defense_readjustment
				}
			}

		if = { #HERE WE GIVE PRG A LITTLE ADVANTAGE WITH MACHINE GUN to PAR IN CASE TAKE THIS LONG for war to start
				limit = {
					c:BRZ = {
						has_technology_researched = repeaters
						has_technology_researched = breech_loading_artillery
						}
					}
				c:PRG = {
					add_technology_progress = { progress = 45000 technology = handcranked_machine_gun }
						}
			}
	
			
	
		c:ARG = { #creates the alliance BR x ARG x URU
			create_diplomatic_pact = {
				country = root
				type = defensive_pact
				}	
			}
		c:URU = {
			create_diplomatic_pact = {
				country = root
				type = defensive_pact
				}	
			}
		c:URU = {
			create_diplomatic_pact = {
				country = c:ARG
				type = defensive_pact
						}
				}

		s:STATE_CORRIENTES.region_state:ARG = { #GIVE CORRIENTES TO PARAGUAY
		set_state_owner = c:PRG
			}

		c:PRG = {
			create_diplomatic_play = {
				name = paraguay_war
			
				target_state = s:STATE_RIO_GRANDE_DO_SUL.region_state:BRZ
				
				war = yes

				type = dp_conquer_state
	
				add_war_goal = { # paraguay claim Uruguay
					holder = c:PRG
					type = conquer_state
					target_state = s:STATE_URUGUAY.region_state:URU
					}

				add_war_goal = { # paraguay claim to santa fé
					holder = c:PRG
					type = conquer_state
					target_state = s:STATE_SANTA_FE.region_state:ARG
					}

				add_war_goal = { #BRAZIL CONQUERS MATO GROSSO
					holder = c:BRZ
					type = conquer_state
					target_state = s:STATE_MATO_GROSSO.region_state:PRG
					}

				add_war_goal = { #ARGENTINA CONQUERS CORRIENTS BACK
					holder = c:ARG
					type = return_state
					target_state = s:STATE_CORRIENTES.region_state:PRG
						}

				add_war_goal = {#WAR REPARATION FROM PARAGUAY TO URU
					holder = c:URU
					type = war_reparations
					target_country = c:PRG
						}

				}	
			}

			s:STATE_CORRIENTES = { #CORRIENTES CLAIM TO ARG
			add_claim = c:ARG
				}
		}
	

	option = { 
		default_option = yes

		name = paraguay_war.6.a #STARTS WAR WITH URUGUAY FALOUR TEXT, no back down from here
		custom_tooltip = paraguay_war.6.ctt
		custom_tooltip = paraguay_war.6.ctt2
		custom_tooltip = paraguay_war.6.ctt3
		}

 
}


#paraguay_war.7 =  PARAGUAY WAR ENDS, how to trigger this??? the peace treaty??


